<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博客正文</title>
    <link rel="stylesheet" href="css/conmmon.css">
    <link rel="stylesheet" href="css/blog_content.css">
    <link rel="stylesheet" href="editor.md/css/editormd.min.css"/>
</head>

<body>
    <!-- 导航栏 -->
    <div class="nav">
        <img src="img/logo2.jpg" alt="">
        <span class="title">我的博客系统</span>
        <!-- 用来占据中间位置 -->
        <span class="spacer"></span>
        <a href="blog_list.html">主页</a>
        <a href="blog_edit.html">写博客</a>
    </div>
    <!-- 版心 -->
    <div class="container">
        <!-- 左侧个人信息 -->
        <div class="container-left">
            <div class="card">
                <img src="img/doge.jpg" class="avtar" alt="">
                <h3 id="username">比特小可爱</h3>
                <a href="http:www.github.com">github 地址</a>
                <div class="counter">
                    <span>文章</span>
                    <span>分类</span>
                </div>
                <div class="counter">
                    <span>2</span>
                    <span>1</span>
                </div>
            </div>
        </div>
        <!-- 右侧内容详情 -->

        <div class="container-right" style="background-color: #fff">
            <div class="blog-content">
                <h2 id="title" style="text-align: center">我的第一篇博客</h2>
                <!-- 博客时间 -->
                <div style="color: #777" id="createtime" class="date">2021-06-02</div>

                <div id="content_id">

                </div>


            </div>
        </div>
    </div>
    <script src="js/jquery.min.js"></script>

    <script src="editor.md/lib/flowchart.min.js"></script>
    <script src="editor.md/lib/jquery.flowchart.min.js"></script>
    <script src="editor.md/lib/marked.min.js"></script>
    <script src="editor.md/lib/prettify.min.js"></script>
    <script src="editor.md/lib/raphael.min.js"></script>
    <script src="editor.md/lib/sequence-diagram.min.js"></script>
    <script src="editor.md/lib/underscore.min.js"></script>
    <script src="editor.md/editormd.min.js"></script>
    <script src="js/getUserInfo.js"></script>
    <script type="text/javascript">
        var testEditor;
        //获取html内容


        $(function () {
            getUserInfo();
            var content = "# 正在加载中...";
            var title = $("#title");
            var time = $("#createtime")
            var str = location.href;
            console.log(str);
            var tmp = str.split('?')[1].split("=");
            console.log(tmp)
            $.ajax({
                type:"GET",
                url:"article/getContent?id=" + tmp[1],
                data:{},
            }).done(function(data){
                if( data.state == 1){
                    title.text(data.article.title);
                    content = data.article.content;
                    console.log(content);
                    time.text(data.article.createtime.split('.')[0].split('T')[0]);
                }else{
                    alert(data.msg);
                    location.href = "/blog_list.html";
                }
                console.log(data);
                showContent(content);
            });
        });

        function showContent(content){
            testEditor = editormd.markdownToHTML("content_id", {//注意：这里是上面DIV的id
                htmlDecode: "style,script,iframe",
                emoji: true,
                taskList: true,
                tex: true, // 默认不解析
                flowChart: true, // 默认不解析
                sequenceDiagram: true, // 默认不解析
                codeFold: true,
                markdown:content,
            });
        }
    </script>
    </body>
</html>